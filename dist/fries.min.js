/* fries.min.js (v1.0.1) 02-07-2013 */
!function(){var a=function(){for(var a=document.querySelectorAll(".action-bar"),b=a.length,c=document.querySelectorAll(".action-overflow"),d=c.length;c&&d--;)c[d].parentNode.removeChild(c[d]);if(window.innerWidth<=480)for(;b--;){var e=a[b].querySelector(".actions"),f=a[b].querySelectorAll(".actions .action");if(f.length>2&&"false"!==e.getAttribute("data-overflow")){var g=(f[0],f.length),h=document.createElement("ol"),i=document.createElement("li"),j=document.createElement("a"),k=document.createElement("i");h.setAttribute("reversed","reversed"),h.classList.add("action-overflow-list"),h.classList.add("spinner");for(var l=1;g>l;l++){f[l].parentNode.classList.add("action-overflow-hidden");var m=document.createElement("li"),n=document.createElement("a");n.innerHTML=f[l].getAttribute("title"),n.setAttribute("href",f[l].getAttribute("href")),n.setAttribute("data-transition",f[l].getAttribute("data-transition")),n.setAttribute("data-timeout",f[l].getAttribute("data-timeout")),n.setAttribute("data-ignore",f[l].getAttribute("data-ignore")),m.classList.add("spinner-item"),m.appendChild(n),h.appendChild(m)}j.classList.add("action"),j.classList.add("action-overflow-icon"),j.classList.add("toggle-spinner"),j.appendChild(k),i.classList.add("action-overflow"),i.appendChild(j),i.appendChild(h),a[b].querySelector(".actions").appendChild(i)}}else for(;b--;)for(var o=a[b].querySelectorAll(".actions .action"),p=o.length;p--;)o[p].parentNode.classList.remove("action-overflow-hidden")};window.addEventListener("load",a,!1),window.addEventListener("resize",a,!1),window.addEventListener("popstate",a,!1),window.addEventListener("push",a,!1)}(),this.fries=this.fries||{},function(){var a=function(a){this.init(a)};a.prototype={_dialog:null,_settings:{selector:null,callbackOk:function(){this.hide()},callbackCancel:function(){this.hide()}},init:function(a){if(this._settings=this.merge(this._settings,a),!this._settings.selector)throw new Error("Missing parameter: selector");if(this._dialog=document.querySelector(this._settings.selector),!this._dialog)throw new Error("Could not find an element in the DOM using: "+this._settings.selector);this._dialog.querySelector(".dialog-ok-button").addEventListener("click",this._settings.callbackOk.bind(this),!1),this._dialog.querySelector(".dialog-cancel-button").addEventListener("click",this._settings.callbackCancel.bind(this),!1)},show:function(){function a(){b.parentNode.removeEventListener("webkitTransitionEnd",a),b.classList.add("on"),b.classList.add("push")}var b=this._dialog;b.parentNode.classList.add("on"),b.parentNode.removeEventListener("webkitTransitionEnd"),b.parentNode.addEventListener("webkitTransitionEnd",a,!1)},hide:function(){function a(){c.removeEventListener("webkitAnimationEnd",a),c.classList.remove("pop"),c.parentNode.classList.remove("on"),c.parentNode.addEventListener("webkitTransitionEnd",b)}function b(){c.parentNode.removeEventListener("webkitTransitionEnd",b)}var c=this._dialog;c.classList.remove("push"),c.classList.remove("on"),c.classList.add("pop"),c.addEventListener("webkitAnimationEnd",a,!1),this.destroy()},destroy:function(){},merge:function(a,b){var c,d={};for(c in a)d[c]=a[c];for(c in b)d[c]=b[c];return d}},this.fries.Dialog=a}(),function(){var a=function(){for(var a=document.querySelectorAll(".input-text"),c=a.length;c--;){var d=a[c],e=document.createElement("span");d.parentNode.classList.contains("input-pretty")||(d.classList.contains("flex1")?(e.classList.add("flex1"),d.classList.remove("flex1")):d.classList.contains("flex2")?(e.classList.add("flex2"),d.classList.remove("flex2")):d.classList.contains("flex3")&&(e.classList.add("flex3"),d.classList.remove("flex3")),e.classList.add("input-pretty"),d.parentNode.insertBefore(e,d),d.parentNode.removeChild(d),e.appendChild(d),d.addEventListener("focus",b,!1),d.addEventListener("blur",b,!1))}},b=function(a){var b=a.currentTarget;b.parentNode.classList.toggle("focus")};window.addEventListener("load",a,!1),window.addEventListener("resize",a,!1),window.addEventListener("popstate",a,!1),window.addEventListener("push",a,!1)}(),function(){var a=function(a){for(var b,c=document.querySelectorAll(".toggle-spinner");a&&a!==document;a=a.parentNode)for(b=c.length;b--;)if(c[b]===a)return a},b=function(b){var c=a(b.target);if(c)return c},c=function(a){for(var b,c=document.querySelectorAll(".spinner-item");a&&a!==document;a=a.parentNode)for(b=c.length;b--;)if(c[b]===a)return a},d=function(a){var b=c(a.target);if(b)return b},e=function(a){var c=b(a);c&&(a.preventDefault(),f(c))},f=function(a){function b(){c.classList.contains("active")||(c.style.display="none")}var c=a.parentNode.querySelectorAll(".spinner")[0];c.classList.contains("active")||(c.style.display="block"),setTimeout(function(){c.classList.toggle("active"),c.addEventListener("webkitTransitionEnd",b)},20)};document.addEventListener("touchend",function(a){if(!d(a)&&!b(a))for(var c=document.querySelectorAll(".spinner"),e=c.length;e--;)c[e].classList.remove("active")}),window.addEventListener("touchend",e,!1)}(),function(){var a,b=20,c=sessionStorage,d={},e=function(a,b){k.id=a.id,b&&(a=h(a.id)),c[a.id]=JSON.stringify(a),window.history.replaceState(a.id,a.title,a.url),d[a.id]=document.body.cloneNode(!0)},f=function(){var a=k.id,d=JSON.parse(c.cacheForwardStack||"[]"),e=JSON.parse(c.cacheBackStack||"[]");for(e.push(a);d.length;)delete c[d.shift()];for(;e.length>b;)delete c[e.shift()];window.history.pushState(null,"",c[k.id].url),c.cacheForwardStack=JSON.stringify(d),c.cacheBackStack=JSON.stringify(e)},g=function(a,b){var d="forward"==b,e=JSON.parse(c.cacheForwardStack||"[]"),f=JSON.parse(c.cacheBackStack||"[]"),g=d?f:e,h=d?e:f;k.id&&g.push(k.id),h.pop(),c.cacheForwardStack=JSON.stringify(e),c.cacheBackStack=JSON.stringify(f)},h=function(a){return JSON.parse(c[a]||null)||{}},i=function(a){var b=r(a);if(b)return a.preventDefault(),"pop"==b.getAttribute("data-transition")?(window.history.go(-1),void 0):(k({url:b.getAttribute("href"),hash:b.hash,container:".page",timeout:b.getAttribute("data-timeout"),transition:b.getAttribute("data-transition")}),void 0)},j=function(a){var b,e,f,i,j,m,n=a.state;if(n&&c[n]){if(f=k.id<n?"forward":"back",g(n,f),b=h(n),e=d[n],b.title&&(document.title=b.title),"back"==f?(j=JSON.parse("back"==f?c.cacheForwardStack:c.cacheBackStack),m=h(j[j.length-1])):m=b,"back"==f&&!m.id)return k.id=n;if(i="back"==f?"pop":m.transition,!e)return k({id:b.id,url:b.url,title:b.title,timeout:b.timeout,transition:i,ignorePush:!0});l((b.contents||e.querySelector(".page")).cloneNode(!0),document.querySelector(".page"),i),k.id=n}},k=function(a){var b=k.xhr;a.container=document.querySelector(a.container),a.container||(a.container=document.querySelector(".page")),b&&b.readyState<4&&(b.onreadystatechange=function(){},b.abort()),b=new XMLHttpRequest,b.open("GET",a.url,!1),b.setRequestHeader("X-DOCUMENT","true"),b.onreadystatechange=function(){a._timeout&&clearTimeout(a._timeout),4==b.readyState&&(200==b.status||0===b.status?m(b,a):n(a.url))},k.id||e({id:+new Date,url:a.url,title:document.title,timeout:a.timeout,transition:null}),a.timeout&&(a._timeout=setTimeout(function(){b.abort("timeout")},a.timeout)),b.send(),b.readyState&&!a.ignorePush&&f()},l=function(a,b,c,d){c?b.parentNode.insertBefore(a,b):b.innerHTML=a.innerHTML,!c&&d&&d(),/push/.test(c)&&(a.classList.add(c),b.classList.add("fade"),a.addEventListener("webkitAnimationEnd",function(){a.removeEventListener("webkitAnimationEnd"),a.classList.remove(c),b.parentNode&&b.parentNode.removeChild(b),d&&d()})),/pop/.test(c)&&(a.style.opacity=1,b.classList.add("pop"),setTimeout(function(){b.classList.add("hidden")},190),b.addEventListener("webkitAnimationEnd",function(){b.removeEventListener("webkitAnimationEnd"),b.parentNode.removeChild(b),d&&d()}))},m=function(a,b){var c=o(a,b);return c.contents?(l(c.contents,b.container,b.transition,function(){e({id:b.id||+new Date,url:c.url,title:c.title,timeout:b.timeout,transition:b.transition},b.id),p()}),c.title&&(document.title=c.title),!b.ignorePush&&window._gaq&&_gaq.push(["_trackPageview"]),!b.hash,void 0):(window.history.replaceState(null,"","#"),window.location.replace(b.url),void 0)},n=function(a){throw new Error("Could not get "+a)},o=function(a,b){var c={},d=a.responseText;return c.url=b.url,d?(/<html/i.test(d)?(head=document.createElement("div"),body=document.createElement("div"),head.innerHTML=d.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0],body.innerHTML=d.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]):(head=body=document.createElement("div"),head.innerHTML=d),c.title=head.querySelector("title"),c.title=c.title&&c.title.innerText.trim(),c.contents=body.querySelector(".page"),c):c},p=function(){"undefined"==typeof CustomEvent&&(CustomEvent=function(a,b){var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.detail,b.bubbles,b.cancelable),c});var a=new CustomEvent("push",{detail:{state:h(k.id)},bubbles:!0,cancelable:!0});window.dispatchEvent(a)},q=function(a){for(var b,c=document.querySelectorAll("a");a&&a!==document;a=a.parentNode)for(b=c.length;b--;)if(c[b]===a)return a},r=function(b){var c=q(b.target);if(!(!c||b.which>1||b.metaKey||b.ctrlKey||a||location.protocol!==c.protocol||location.host!==c.host||!c.hash&&/#/.test(c.href)||c.hash&&c.href.replace(c.hash,"")===location.href.replace(location.hash,"")||"true"==c.getAttribute("data-ignore")))return c};window.addEventListener("touchstart",function(){a=!1}),window.addEventListener("touchmove",function(){a=!0}),window.addEventListener("touchend",i),window.addEventListener("popstate",j)}(),function(){var a=function(a){for(var b,c=document.querySelectorAll(".tab-fixed li a");a&&a!==document;a=a.parentNode)for(b=c.length;b--;)if(c[b]===a)return a};window.addEventListener("touchend",function(b){function c(a){a.target.classList.remove("in-transition")}var d,e,f,g,h="active",i="."+h,j=a(b.target);if(j&&(b.preventDefault(),g=j.parentNode,d=g.parentNode.querySelector(i),d&&d.classList.remove(h),g.classList.add(h),f=document.querySelector(j.hash))){e=f.parentNode.querySelector(i),e&&e.classList.remove(h),f.classList.add(h);for(var k=document.querySelectorAll(".tab-item"),l=k.length;l--;)k[l].classList.add("in-transition"),k[l].style.left=100*l+"%",k[l]==f&&(targetIndex=l),k[l]==e&&(activeIndex=l);l=k.length,setTimeout(function(){for(;l--;)k[l].style.webkitTransform="translateX("+(0===targetIndex?0:"-"+100*targetIndex)+"%)",k[l].addEventListener("webkitTransitionEnd",c)},50)}})}();